<ion-content [fullscreen]="true">
  <div class="container">
    <div class="row py-3 px-2">
      <div class="col-12">
        <!-- top icons and month details -->

        <div class="row py-3">
          <div class="col-12 text-center fw-bold fs-3">
            <span id="year-dialog">{{monthList[currentMonth].name}} / {{currentYear}}</span>
            <ion-modal id="example-modal" trigger="year-dialog" (willDismiss)="onWillDismiss($event)">
              <ng-template>
                <div class="wrapper app-bg-dark app-text-primary p-2">
                  <div class="row">
                    <div class="text-center fs-4">
                      <span class="fs-1 me-3 fw-bold" (click)="changeYear(1)">&#8249;</span>
                      {{selectedYear}}
                      <span class="fs-1 ms-3 fw-bold" (click)="changeYear(0)">&#8250;</span>
                    </div>
                    <div class="col mt-3 p-3">
                      <div class="row">
                        @for (m of monthList; track $index) {
                        <div class="col-3 p-2">
                          <div class="app-card app-text-primary text-center p-1 py-2 btn w-100"
                            [ngClass]="{'border': (selectedMonth + 1) === m.month }" (click)="changeMonth(m.month)">
                            {{m.month}}
                          </div>
                        </div>
                        }
                      </div>
                    </div>

                    <!-- close and submit icons -->
                    <div class="col-12 d-flex justify-content-between">
                      <ion-icon name="close-outline" class="fs-1 fw-bold m-3"
                        (click)="submitYearMonth(false)"></ion-icon>
                      <ion-icon name="checkmark-outline" class="fs-1 fw-bold m-3"
                        (click)="submitYearMonth(true)"></ion-icon>
                    </div>
                  </div>
                </div>
              </ng-template>
            </ion-modal>
          </div>
        </div>


        <!-- reports -->
        <div class="row">
          <div class="col-12 app-card overflow-auto">
            <p>Total spending on the month : {{expenseData?.total_month_expense |
              currency:userSummaryData?.default_currency}}</p>
            <div>
              <canvas #lineCanvas></canvas>
            </div>
          </div>

          <!-- category -->
          <div class="col-12 app-card overflow-auto">
            <p>Category Ranking</p>
            <canvas #pieCanvas class="mt-4"></canvas>
          </div>
        </div>

      </div>
    </div>
  </div>
</ion-content>